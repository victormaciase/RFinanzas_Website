<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>


</head>

<body>
    <div class="container">

        <!-- Title Row -->

        <div class="row mt-3">
            <div class="col-12 bg-dark text-white p-3">
                <h1 class="display-6">R para Finanzas</h1>
            </div>
        </div>

        <nav class="navbar navbar-expand-lg custom-navbar">
            <a class="navbar-brand" href="#"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item active">
                        <a class="nav-link fs-4" href="#">Home</a>
                    </li>
        
                    <li class="nav-item dropdown">
                        <a class="nav-link fs-4 dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Notas de Clases
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown1">
                            <li><a class="dropdown-item" href="#">No disponible</a></li>
                        </ul>
                    </li>
        
                    <li class="nav-item dropdown">
                        <a class="nav-link fs-4 dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Tareas
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown2">
                            <li><a class="dropdown-item" href="Tareas/Tarea1_FinalVersion.pdf">Tarea 1</a></li>
                        </ul>
                    </li>
        
                    <li class="nav-item dropdown">
                        <a class="nav-link fs-4 dropdown-toggle" href="#" id="navbarDropdown3" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Guías de Ejercicios
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown3">
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia1.pdf">Guía 1</a></li>
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia2.pdf">Guía 2</a></li>
			                <li><a class="dropdown-item" href="GuiasEjercicios/Guia3.pdf">Guía 3</a></li>
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia3.qmd">Guía 3 (Quarto document)</a></li>
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia4.pdf">Guía 4</a></li>
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia5.pdf">Guía 5</a></li>
                            <li><a class="dropdown-item" href="GuiasEjercicios/Guia6.pdf">Guía 6</a></li>
			    <li><a class="dropdown-item" href="GuiasEjercicios/Guia7.pdf">Guía 7</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        
    

    
        <div class="row mt-3">

            <div id="demo" class="carousel slide">
                <!-- Indicators -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
                </div>
            
                <!-- The slideshow -->
                <div class="carousel-inner text-center font-monospace text-black">

                    <div class="carousel-item active">
                        
                        <div id="chart-container"></div> <!-- The D3 chart will be appended here -->
                    </div>
            
                    <div class="carousel-item flex-column">                        

                            <img src="pics/knitting.png" class="img-fluid" alt="Grid Responsive Image"><br>
                            <h6 class="mt-1">Illustrations by Alison Hill and Allison Horst, for RStudio.</h6>

                    </div>
                </div>
            
                <!-- Left and right controls -->
                <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
                        
        </div>



        <!-- Main Content Row -->
        <div class="row">
            <!-- First Column: Image -->
            <div id="bio" class="col-md-5 text-left mt-3">
                <div class="card col-12 bg-secondary text-white p-3">
                    <div class="body">
                        <h4 class="card-title font-monospace">
                            Profesor: Víctor Macías E.</h4>
                        <h5 class="card-title font-monospace">E-mail: vmaciase@fen.uchile.cl</h5>    
                        
                    </div>
                </div>
                
            
                
                    <div class="accordion accordion-flush mt-3" id="accordionFlushExample">
                        <div class="accordion-item">
                          <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                              Aviso 1: Instalación de R y RStudio
                            </button>
                          </h2>
                          <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                            <div class="accordion-body">
                                <ol>
                                    <li>Ir a <a href="https://posit.co/download/rstudio-desktop/">sitio web.</a></li>
                                    <li>Descargar e instalar R y RStudio.</li>
                                    <li>Abrir RStudio y comenzar a trabajar.</li>
                                </ol>
                                                                
                            </div>
                          </div>
                        </div>
                    </div>
                    
                
            
            </div>

    
            <!-- Second Column: Three Rows -->
            <div id="more" class="col-md-7">
                
                <!-- First Row: Music -->
                <div class="row mt-3">
                    <div class="card col-12 bg-secondary text-white p-3">
                        <div class="body font-monospace">
                            <h3 class="card-title">Descripción del curso</h3>
                            Este curso presenta una introducción a R. Entre los tópicos a discutir se encuentran: importación y
                            exportación de datos, manipulación de datos, visualización de datos, modelamiento y R Markdown
                            para elaborar informes y presentaciones. 
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="card col-12 bg-secondary text-white p-3">
                        <div class="body d-flex justify-content-between align-items-center font-monospace">
                            <h3 class="card-title">Programa del curso</h3>
                            <a href="ProgramaCurso/R_FINANZAS-2025.pdf" download class="btn btn-info">Descargar</a> 
                        </div>
                    </div>
                </div>
    
                <!-- Second Row: Movies -->
                <div class="row mt-3">
                    <div class="card col-12 bg-secondary text-black p-3">
                        <div id="demo1" class="carousel slide">

                            <!-- Indicators -->
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
                                <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
                                <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
                                <button type="button" data-bs-target="#demo" data-bs-slide-to="3"></button>
                                <button type="button" data-bs-target="#demo" data-bs-slide-to="4"></button>
                            </div>
                        
                            <!-- The slideshow -->
                            <div class="carousel-inner text-center font-monospace text-white">
                                <div class="carousel-item active">
                                    <h3>Evaluaciones</h3>
                                </div>

                                <div class="carousel-item">                                                         
                                    <div class="flex-container">
                                        <div class="box box01">2 Controles<br>40%</div>
                                        <div class="box box02">2 Tareas<br>30%</div>
                                        <div class="box box03">1 Trabajo (3 Informes)<br>30%</div>
                                    </div>                                      
                                </div>


                                <div class="carousel-item">                                                         
                                    <div class="flex-container">
                                        <div class="box box1">Controles</div>
                                        <div class="box box2">21 de Abril</div>
                                        <div class="box box3">18 de Junio</div>
                                    </div>                                      
                                </div>

                                <div class="carousel-item">                                                         
                                    <div class="flex-container">
                                        <div class="box box11">Tareas</div>
                                        <div class="box box12">22 de Abril</div>
                                        <div class="box box13">19 de Junio</div>
                                    </div>                                      
                                </div>

                                <div class="carousel-item">                                                         
                                    <div class="flex-container">
                                        <div class="box box21">Informes</div>
                                        <div class="box box22">31 de Marzo</div>
                                        <div class="box box23">14 de Mayo</div>
                                        <div class="box box24">15 de Junio</div>
                                    </div>                                      
                                </div>


                            </div>
                        
                            <!-- Left and right controls -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#demo1" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#demo1" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        
                        </div>

                        
                    </div>
                </div>
    
    
            </div>
        </div>

        <div style="height: 50px;"></div>
    
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        function drawChart() {
        // Clear previous SVG (prevents duplication)
            d3.select("#chart-container").select("svg").remove();

        // Define dimensions
            const width = 1500;
            const height = 900;

        // Create responsive SVG container
            const svg = d3.select("#chart-container")
                .append("svg")
                .attr("width", "100%")  // Makes it responsive
                .attr("height", "500px") // Ensures visibility
                .attr("viewBox", `0 0 ${width} ${height}`) // Coordinate system
                .attr("preserveAspectRatio", "xMidYMid meet");

        // Add main rectangle (scaled dynamically)
            svg.append("rect")
                .attr("width", "80%")  // Responsive width
                .attr("height", "60%") // Responsive height
                .attr("x", width * 0.1)
                .attr("y", height * 0.17)
                .attr("rx", "5%")
                .attr("ry", "5%")
                .attr("fill", "none")
                .attr("stroke", "black")
                .attr("stroke-width", 3);

        // Add inner rectangle (scaled dynamically)
            svg.append("rect")
                .attr("width", width * 0.33)
                .attr("height", height * 0.49)
                .attr("x", width * 0.4)
                .attr("y", height * 0.23)
                .attr("rx", 10)
                .attr("ry", 10)
                .attr("fill", "rgb(220,230,225)");

            svg.append("text")
                .attr("class", "chart-title") // Optional: Use a CSS class
                .attr("x", "25%")  // Center horizontally
                .attr("y", 120)  // Position at the top
                .attr("text-anchor", "middle") // Center text alignment
                .style("font-size", "36px")
                .text("Flujo de trabajo");

        // Define arrow markers
            svg.append("defs").append("marker")
                .attr("id", "arrow")
                .attr("markerWidth", 10)
                .attr("markerHeight", 10)
                .attr("refX", 5)
                .attr("refY", 3)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,0 L0,6 L6,3 Z")
                .attr("fill", "black");



        // Add arrows (relative positioning)
            const arrows = [
                { x1: width * 0.23, y1: height * 0.49, x2: width * 0.27, y2: height * 0.49 },
                { x1: width * 0.38, y1: height * 0.49, x2: width * 0.42, y2: height * 0.49 },
                { x1: width * 0.73, y1: height * 0.49, x2: width * 0.76, y2: height * 0.49 }
            ];

            svg.selectAll("line")
                .data(arrows)
                .enter()
                .append("line")
                .attr("x1", d => d.x1)
                .attr("y1", d => d.y1)
                .attr("x2", d => d.x2)
                .attr("y2", d => d.y2)
                .attr("stroke", "black")
                .attr("stroke-width", 2)
                .attr("marker-end", "url(#arrow)");

        // Add Bezier paths (scaled dynamically)
            const bezierPaths = [
                { d: `M${width * 0.67},${height * 0.28} Q${width * 0.77},${height * 0.44} ${width * 0.65},${height * 0.66}` },
                { d: `M${width * 0.59},${height * 0.69} Q${width * 0.51},${height * 0.67} ${width * 0.5},${height * 0.52}` },
                { d: `M${width * 0.50},${height * 0.46} Q${width * 0.5},${height * 0.3} ${width * 0.57},${height * 0.26}` }
            ];

            svg.selectAll(".bezier-path")
                .data(bezierPaths)
                .enter()
                .append("path")
                .attr("class", "bezier-path")
                .attr("d", d => d.d)
                .attr("fill", "transparent")
                .attr("stroke", "black")
                .attr("stroke-width", 2)
                .attr("marker-end", "url(#arrow)");

        // Tooltip div
            const tooltip = d3.select("body").append("div")
                .style("position", "absolute")
                .style("background", "rgba(40, 20, 100, 0.7)")
                .style("color", "white")
                .style("padding", "8px")
                .style("border-radius", "5px")
                .style("visibility", "hidden")
                .style("font-size", "14px")
                .style("opacity", 1);

        // Responsive Text with Tooltips
            const textData = [
                { x: width * 0.12, y: height * 0.5, text: "Importar", tooltip: "Importar datos de archivos, bases de datos, web y APIs, entre otros." },
                { x: width * 0.285, y: height * 0.5, text: "Ordenar", tooltip: "Organizar datos de manera que cada columna sea una variable y cada fila, una observación (tidy data)." },
                { x: width * 0.44, y: height * 0.5, text: "Transformar", tooltip: "Limpieza, creación de nuevas variables y agregación de datos." },
                { x: width * 0.58, y: height * 0.27, text: "Visualizar", tooltip: "Creación de gráficos y de otras representaciones visuales." },
                { x: width * 0.60, y: height * 0.70, text: "Modelar", tooltip: "Aplicar modelos predictivos o de inferenciaprescriptivos." },
                { x: width * 0.77, y: height * 0.5, text: "Comunicar", tooltip: "Presentar los resultados a la(s) audiencia(s) a través de informes, presentaciones y dashboards." },
                { x: width * 0.41, y: height * 0.75, text: "Comprender", tooltip: "Descubrir relaciones entre variables para mejorar la toma de decisiones." },
                { x: width * 0.15, y: height * 0.81, text: "Programar", tooltip: "¡Escribir código en R!" }
            ];

            svg.selectAll("text:not(.chart-title)")
                .data(textData)
                .enter()
                .append("text")
                .attr("x", d => d.x)
                .attr("y", d => d.y)
                .attr("fill", "red")
                .attr("font-size", "2.5vw") // Dynamic font size
                .style("cursor", "pointer")
                .text(d => d.text)
                .on("mouseenter", (event, d) => {
                    tooltip.html(d.tooltip.replace(/\n/g, "<br>"))
                        .style("visibility", "visible")
                        .style("opacity", 1);
                })
                .on("mousemove", (event) => {
                    tooltip.style("top", `${event.pageY + 10}px`)
                        .style("left", `${event.pageX + 10}px`);
                })
                .on("mouseleave", () => {
                    tooltip.style("visibility", "hidden")
                        .style("opacity", 0);
                });
        }

    // Trigger rendering when carousel slide is active
    document.querySelector('#demo').addEventListener('slid.bs.carousel', function () {
        if (document.querySelector('.carousel-item.active #chart-container')) {
            drawChart();
        }
    });

    // Run chart drawing once when the page loads
    drawChart();
    });

    </script>
        


</body>
</html>